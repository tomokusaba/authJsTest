<html>
<head>
<title>AuthJavascriptTest</title>
<script>
async function getUserInfo() {
  const response = await fetch('/.auth/me');
  const payload = await response.json();
  const { clientPrincipal } = payload;
  return clientPrincipal;
}
async function get() {
var rejson = await getUserInfo();
if (rejson.clientPrincipal == "null") {
var new_ele = document.createElement("p");
new_ele.innerHTML = '認証されてません';
document.getElementById('add').appendChild(new_ele);
}
else 
{
var new_ele = document.createElement('p');
new_ele.innerHTML = rejson.identityProvider;
var new_ele2 = document.createElement('p');
new_ele2.innerHTML = rejson.userId;
var new_ele3 = document.createElement('p');
new_ele3.innerHTML = rejson.userDetails;
var new_ele4 = document.createElement('p');
new_ele4.innerHTML = rejson.userRoles;
document.getElementById('add').appendChild(new_ele);
document.getElementById('add').appendChild(new_ele2);
document.getElementById('add').appendChild(new_ele3);
document.getElementById('add').appendChild(new_ele4);
console.log(rejson);
}

}

</script>
</head>
<body>
<a href="/.auth/login/aad">AAD Login</a><br />
<a href="/.auth/login/facebook">facebook Login</a><br />
<a href="/.auth/login/github">github Login</a><br />
<a href="/.auth/login/google">google Login</a><br />
<a href="/.auth/login/twitter">twitter Login</a><br />
<a href="/.auth/logout">Log out</a><br />

<div id="add"></div>
<script>
get();
</script>
</body>
</html>